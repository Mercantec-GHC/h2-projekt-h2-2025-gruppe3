@page "/"
@using DomainModels
@inject Blazor.Services.APIService ApiService
@using System.Net.Http



<PageTitle>Home</PageTitle>
@if (hotels == null)
{
    <p><em>Loader hoteller...</em></p>
}
else if (hotels.Length == 0)
{
    <div class="alert alert-info">Ingen hoteller fundet.</div>
}
else
{

			
                @foreach (var h in hotels)
                {

						hid = $"images/hotel_{h.Id}_outside.jpg";
	
			<div class="card col-3 card-img-top">
			<img src=@hid class="img-thumbnail" alt="billede af et hotel">
                    <div class="h-100 d-flex flex-column">
						<div class="card-body border-bottom row row-cols-1 row-cols-sm-2 gy-1 text-nowrap">
							
							<div class="fw-bold mb-2">@h.Name</div>
							<div class="col text-end">
                                    <div class="active text-alert fw-semibold me-1">@h.PercentagePrice</div>
							</div>
								<small class="card-subtitle"><i>@h.Road, @h.Zip, @h.Road, @h.Country</i></small>
						</div>
						

						<div class="card-body">
							<div class="row row-cols-1 row-cols-sm-2 gy-1 text-nowrap">
								<div class="col text-end text-sm-start">facilitys
									<span class="mx-1"></span>
								</div>
								<div class="col text-end">
									<div class="active text-alert fw-semibold me-1">rooms avelivebal</div>
								</div>
							</div>
						</div>
					</div>
				</div>}
	
}
@code {
    private HotelGetDto[]? hotels;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            // Hent op til 100 hoteller (tilpas efter behov)
            hotels = await ApiService.GetHotelsAsync(3);

        }
        catch (Exception ex)
        {
            Console.WriteLine($"Fejl ved hentning af hoteller: {ex.Message}");
            hotels = Array.Empty<HotelGetDto>();
        }
    }

	string hid = "";
}
